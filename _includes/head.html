<head>
  <!-- Google tag (gtag.js) with Consent Mode V2 -->
  {% if site.google_analytics %}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    // Set default consent state (denied until user explicitly consents)
    gtag('consent', 'default', {
      'analytics_storage': 'denied',
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied'
    });

    gtag('config', '{{ site.google_analytics }}', {
      // Ensure no data is sent until consent is granted
      'send_page_view': false
    });
  </script>
  {% endif %}

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Tags - Jekyll SEO plugin will handle most of this -->
  {% seo %}
  
  <!-- Open Graph Tags for social media previews -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="AI-Native Development Consulting">
  <meta property="og:locale" content="en_US">
  <meta property="og:image" content="{{ site.url }}/assets/images/portrait/portrait-800w.jpg">
  <meta property="og:image:width" content="800">
  <meta property="og:image:height" content="800">
  <meta property="og:image:alt" content="Angel Dimitrov - AI Development Consultant - Ship Software 3x Faster">
  <meta property="og:image:type" content="image/jpeg">

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="{{ site.url }}/assets/images/portrait/portrait-800w.jpg">
  <meta name="twitter:image:alt" content="Angel Dimitrov - Ship Software 3x Faster with AI-Native Development">
  <meta name="twitter:creator" content="@angeldimitrov">
  <meta name="twitter:site" content="@angeldimitrov">
  
  <!-- Additional Meta Tags -->
  <meta name="keywords" content="{% if page.keywords %}{{ page.keywords }}{% else %}AI development consulting, AI-native development, engineering workflow optimization, AI agents, CTO consulting, VP engineering{% endif %}">
  <meta name="robots" content="index, follow">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ site.baseurl }}/favicon.ico">
  <link rel="icon" type="image/svg+xml" href="{{ site.baseurl }}/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ site.baseurl }}/favicon.svg">
  
  <!-- TailwindCSS Compiled Styles -->
  <link rel="stylesheet" href="{{ site.baseurl }}/dist/styles.css?v=18">
  
  <!-- Google Fonts with optimized loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  {% if page.url == "/" %}
  <!-- Custom D3.js build with only d3.select (97% smaller!) -->
  <script src="{{ site.baseurl }}/dist/d3-custom.min.js" defer></script>
  {% endif %}
  
  <!-- Performance optimizations -->
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  
  <!-- Additional SEO meta tags -->
  <meta name="theme-color" content="#2563EB">
  <meta name="msapplication-TileColor" content="#2563EB">
  <meta name="language" content="en">
  <meta name="revisit-after" content="7 days">
  <meta name="distribution" content="global">
  <meta name="rating" content="general">
  
  <!-- Geo meta tags for global reach -->
  <meta name="geo.region" content="Worldwide">
  <meta name="geo.placename" content="Remote Services">
  
  <!-- Business meta tags -->
  <meta name="business.contact.email" content="angel@coding-agents.ai">
  <meta name="business.hours" content="Mo-Fr 09:00-17:00">
  <meta name="business.type" content="Consulting Services">
  
  <!-- Global Organization Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Coding Agents AI",
    "url": "https://coding-agents.ai",
    "logo": "https://coding-agents.ai/assets/images/portrait/portrait-800w.jpg",
    "description": "AI-native development consulting for engineering leaders. Transform your team's productivity with Claude Code workshops, pilot implementations, and strategic advisory services.",
    "founder": {
      "@type": "Person",
      "name": "Angel Dimitrov",
      "jobTitle": "AI Development Consultant",
      "url": "https://coding-agents.ai/",
      "sameAs": [
        "https://github.com/angeldimitrov",
        "https://linkedin.com/in/angeldimitrov"
      ]
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "Sales",
      "email": "angel@coding-agents.ai",
      "availableLanguage": ["English", "German"],
      "areaServed": "Worldwide"
    },
    "sameAs": [
      "https://github.com/angeldimitrov",
      "https://linkedin.com/in/angeldimitrov"
    ],
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Remote",
      "addressCountry": "Worldwide"
    }
  }
  </script>

  {% if page.structured_data %}
  <!-- Page-specific Structured Data -->
  {{ page.structured_data }}
  {% endif %}
  
  <style>
    /* Base Styles */
    html, body {
      overflow-x: hidden;
      width: 100%;
    }
    
    /* Clean mobile navigation scroll */
    nav .overflow-x-auto {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    nav .overflow-x-auto::-webkit-scrollbar {
      display: none;
    }
    
    /* Dark Section Theming */
    .hero,
    .section-dark {
      background: #1e293b;
      position: relative;
      overflow: hidden;
    }

    /* Grid Pattern Background */
    .hero::after,
    .section-dark::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        linear-gradient(rgba(148, 163, 184, 0.08) 1px, transparent 1px),
        linear-gradient(90deg, rgba(148, 163, 184, 0.08) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: 0;
      pointer-events: none;
    }

    .section-dark > * {
      position: relative;
      z-index: 1;
    }

    /* Text Gradients */
    .gradient-text-hero {
      background: linear-gradient(to right, #ffffff, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .gradient-text-light {
      background: linear-gradient(to right, #2563eb, #9333ea);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Button System */
    .btn-primary {
      display: inline-block;
      padding: 1rem 2rem;
      background: linear-gradient(to right, #2563EB, #9333EA);
      color: white;
      font-weight: 600;
      border-radius: 0.75rem;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    .btn-primary:hover {
      background: linear-gradient(to right, #1D4ED8, #7C3AED);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
      transform: translateY(-2px);
    }

    .btn-secondary {
      display: inline-block;
      padding: 1rem 2rem;
      background: #F5F5F5;
      color: #404040;
      font-weight: 600;
      border-radius: 0.75rem;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .btn-secondary:hover {
      background: #E5E5E5;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      transform: translateY(-2px);
    }

    .btn-secondary-dark {
      display: inline-block;
      padding: 1rem 2rem;
      background: #374151;
      color: white;
      font-weight: 600;
      border-radius: 0.75rem;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
    }

    .btn-secondary-dark:hover {
      background: #4B5563;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
      transform: translateY(-2px);
    }

    /* Focus States for Accessibility */
    .btn-primary:focus-visible,
    .btn-secondary:focus-visible,
    .btn-secondary-dark:focus-visible {
      outline: 2px solid #3B82F6;
      outline-offset: 2px;
    }

    {% if page.url == "/" %}
    /* Hero Specific */
    #agent-network-d3 {
      position: absolute;
      inset: 0;
      z-index: 1;
      pointer-events: none;
      overflow: hidden;
      width: 100%;
      height: 100%;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      animation: fadeInUp 1s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    {% endif %}

    {% if page.url == "/workshop.html" or page.url == "/workshop/" %}
    /* Terminal Animation */
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    .typing-animation {
      overflow: hidden;
      white-space: nowrap;
      animation: typing 2s steps(40, end);
    }

    .cursor::after {
      content: 'â–ˆ';
      animation: blink 1s infinite;
      color: #10B981;
    }
    {% endif %}
  </style>
  
</head>